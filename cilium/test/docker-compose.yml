version: '3.7'

services:
  red:
    image: nginx
    labels:
      - id=red
      - "traefik.enable=true"
      - "traefik.http.routers.red.rule=Host(`red.whoa.bot`)"
      - "traefik.http.services.red.loadbalancer.server.port=80"
  blue:
    image: nginx
    labels:
      - id=blue
      - "traefik.enable=true"
      - "traefik.http.routers.blue.rule=Host(`blue.whoa.bot`)"
      - "traefik.http.services.blue.loadbalancer.server.port=80"
  black:
    image: nginx
    labels:
      - id=black
      - "traefik.enable=true"
      - "traefik.http.routers.black.rule=Host(`black.whoa.bot`)"
      - "traefik.http.services.black.loadbalancer.server.port=80"

networks:
  default:
    external:
      name: cnet
  kitt:
    external:
      name: kitt
